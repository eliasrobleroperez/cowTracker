{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/analisis/analisis.component.ts","webpack:///src/app/analisis/analisis.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/colocar-marcadores/colocar-marcadores.component.ts","webpack:///src/app/colocar-marcadores/colocar-marcadores.component.html","webpack:///src/app/mapa/mapa.component.ts","webpack:///src/app/mapa/mapa.component.html","webpack:///src/app/service/crud.service.ts","webpack:///src/app/visualizar-ubicacion-mapa/visualizar-ubicacion-mapa.component.ts","webpack:///src/app/visualizar-ubicacion-mapa/visualizar-ubicacion-mapa.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AnalisisComponent","crudService","numero","obtenerUbicacion","get_Ubicaciones","subscribe","data","Ubicaciones","map","payload","doc","latitud","longitud","fecha","selector","templateUrl","styleUrls","routes","path","redirectTo","pathMatch","component","AppRoutingModule","forRoot","declarations","imports","AppComponent","title","AppModule","initializeApp","firebase","providers","bootstrap","ColocarMarcadoresComponent","router","marcador","isMarcadorGuardadoBD","permitirColocarMarcador","isMarcadorColocadoMapa","urlAPIMapa","iconoMarcador","iconSize","iconAnchor","iconUrl","inicializarMapa","agregarQuitarMarcadorClick","obtenerMarcador","mapa","setView","maxZoom","attribution","addTo","doubleClickZoom","disable","get_Marcador","Marcador","distancia","length","icon","bindPopup","openPopup","addLayer","idMarcador","crearNuevaMarcador","res","undefined","console","log","error","navigate","removeLayer","eliminarMarcador","on","latitudLongitud","mouseEventToLatLng","originalEvent","lat","lng","MapaComponent","rutaActiva","snapshot","params","mark","CrudService","fireservice","collection","add","snapshotChanges","ubicacion","providedIn","VisualizarUbicacionMapaComponent","pubnub","pnChannel","Date","now","fueraRango","marcadorExistente","cambiarPosicionMarcador","addListener","message","medirDistancia","rango","getLatLng","getRadius","setStyle","color","latitudFuera","longitudFuera","crearUbicacionGanadoAlejado","init","publishKey","subscribeKey","channels","MarcadorCentral","circle","Ubicacion","crearUbicacionFueraLimite","latCircle","lngCircle","distance","environment","production","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","bootstrapModule","err"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { CrudService } from '../service/crud.service'\r\n\r\n@Component({\r\n  selector: 'app-analisis',\r\n  templateUrl: './analisis.component.html',\r\n  styleUrls: ['./analisis.component.css']\r\n})\r\nexport class AnalisisComponent implements OnInit {\r\n  Ubicaciones: any;\r\n  numero: number = 1;\r\n\r\n  constructor(public crudService: CrudService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.obtenerUbicacion();\r\n  }\r\n\r\n  obtenerUbicacion() {\r\n    this.crudService.get_Ubicaciones().subscribe(data => {\r\n      this.Ubicaciones = data.map(e => {\r\n        return {\r\n          id: e.payload.doc.id,\r\n          numero: this.numero++,\r\n          latitud: e.payload.doc.data()['latitud'],\r\n          longitud: e.payload.doc.data()['longitud'],\r\n          fecha: e.payload.doc.data()['fecha'],\r\n        };\r\n      })\r\n    })\r\n  }\r\n}\r\n","<div class=\"container col-md-10\">\r\n    <br><br>\r\n    <p class=\"text-left\"><span>\r\n            <h2>Historial de ubicaciones</h2>\r\n        </span></p>\r\n    <p class=\"text-center\"><span>\r\n            <h5>A continuación se muestra el historial de ubicaciones en\r\n                que el ganado se ha alejado del margen permitido</h5>\r\n        </span></p>\r\n    <br>\r\n    <div class=\"row\">\r\n        <div class=\"table-responsive\">\r\n            <table class=\"table table-striped table-dark\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">Fecha</th>\r\n                        <th scope=\"col\" >Latitud</th>\r\n                        <th scope=\"col\">Longitud</th>\r\n                        <th scope=\"col\">Visualizar</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let ubicacion of Ubicaciones\">\r\n                        <th scope=\"row\">{{ubicacion.numero}}</th>\r\n                        <td >{{ubicacion.fecha | date:'medium'}}</td>\r\n                        <td >{{ubicacion.latitud}}</td>\r\n                        <td>{{ubicacion.longitud}}</td>\r\n                        <td><a [routerLink]=\"['/mapa',ubicacion.latitud,ubicacion.longitud]\">Ver en mapa</a></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n           \r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {Routes, RouterModule} from '@angular/router';\r\nimport { VisualizarUbicacionMapaComponent } from './visualizar-ubicacion-mapa/visualizar-ubicacion-mapa.component';\r\nimport { ColocarMarcadoresComponent } from './colocar-marcadores/colocar-marcadores.component';\r\nimport { AnalisisComponent } from './analisis/analisis.component';\r\nimport { MapaComponent } from './mapa/mapa.component';\r\n\r\nconst routes: Routes =[\r\n  {path: '', redirectTo: '/visualizar', pathMatch: 'full'},\r\n  {path: 'visualizar', component: VisualizarUbicacionMapaComponent},\r\n  {path: 'insertar', component: ColocarMarcadoresComponent},\r\n  {path: 'datosAlmacenados', component: AnalisisComponent},\r\n  {path: 'mapa/:latitud/:longitud', component: MapaComponent}\r\n]\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    RouterModule.forRoot(routes)\r\n  ],\r\n  exports:[RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\nimport {CrudService} from './service/crud.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'rastreadorW';\r\n\r\n  constructor(public crudService: CrudService){ }\r\n\r\n}\r\n","<nav class=\"navbar navbar-dark bg-dark\">\r\n  <span class=\"navbar-brand mb-0 h1\">CowTracker</span>\r\n  <form class=\"form-inline\">\r\n    <a class=\"nav-link\" href=\"/visualizar\"> Ver ubicación actual <span class=\"sr-only\">(current)</span></a>\r\n    <a class=\"nav-link\" href=\"/insertar\">Agregar marcador<span class=\"sr-only\">(current)</span></a>\r\n    <a class=\"nav-link\" href=\"/datosAlmacenados\">Datos Almacenados<span class=\"sr-only\">(current)</span></a>\r\n  </form>\r\n</nav>\r\n<main>\r\n  <router-outlet></router-outlet>\r\n</main>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {AngularFireModule} from '@angular/fire';\r\nimport {AngularFireDatabaseModule} from '@angular/fire/database';\r\nimport {environment} from '../environments/environment';\r\nimport {AngularFirestoreModule} from '@angular/fire/firestore';\r\n\r\n//service\r\nimport {CrudService} from './service/crud.service';\r\n\r\n//Leaflet\r\nimport {LeafletModule} from '@asymmetrik/ngx-leaflet';\r\n\r\n//Pubnub\r\nimport {PubNubAngular} from 'pubnub-angular2'; \r\n\r\nimport { AppComponent } from './app.component';\r\nimport { VisualizarUbicacionMapaComponent } from './visualizar-ubicacion-mapa/visualizar-ubicacion-mapa.component';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { ColocarMarcadoresComponent } from './colocar-marcadores/colocar-marcadores.component';\r\nimport { AnalisisComponent } from './analisis/analisis.component';\r\nimport { MapaComponent } from './mapa/mapa.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    VisualizarUbicacionMapaComponent,\r\n    ColocarMarcadoresComponent,\r\n    AnalisisComponent,\r\n    MapaComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    AngularFireModule.initializeApp(environment.firebase),\r\n    AngularFireDatabaseModule,\r\n    AngularFirestoreModule,\r\n    AppRoutingModule,\r\n    LeafletModule,\r\n  ],\r\n  providers: [CrudService,PubNubAngular],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CrudService } from '../service/crud.service';\r\nimport * as L from 'leaflet';\r\n\r\n@Component({\r\n  selector: 'app-colocar-marcadores',\r\n  templateUrl: './colocar-marcadores.component.html',\r\n  styleUrls: ['./colocar-marcadores.component.css']\r\n})\r\nexport class ColocarMarcadoresComponent implements OnInit {\r\n  mapa;\r\n  Marcador: any;\r\n  marcador = null;\r\n  latitud: number;\r\n  longitud: number;\r\n  distancia: number;\r\n  idMarcador: number;\r\n  isMarcadorGuardadoBD: boolean = false;\r\n  permitirColocarMarcador: boolean = true;\r\n  isMarcadorColocadoMapa: boolean = false;\r\n  urlAPIMapa = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';\r\n\r\n  constructor(public crudService: CrudService, public router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    this.inicializarMapa();\r\n    this.agregarQuitarMarcadorClick();\r\n    this.obtenerMarcador();\r\n  }\r\n\r\n  private inicializarMapa(): void {\r\n    this.mapa = L.map('mapa').setView([16.752769803087457, -93.11428070068361], 13);\r\n    L.tileLayer(this.urlAPIMapa, {\r\n      maxZoom: 18,\r\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n    }).addTo(this.mapa);\r\n    this.mapa.doubleClickZoom.disable();\r\n  }\r\n\r\n  obtenerMarcador() {\r\n    this.crudService.get_Marcador().subscribe(data => {\r\n      this.Marcador = data.map(e => {\r\n        return {\r\n          id: e.payload.doc.id,\r\n          latitud: e.payload.doc.data()['latitud'],\r\n          longitud: e.payload.doc.data()['longitud'],\r\n          distancia: e.payload.doc.data()['distancia'],\r\n        };\r\n      })\r\n      if (this.Marcador.length == 1) {\r\n        this.marcador = L.marker([this.Marcador[0].latitud, this.Marcador[0].longitud], {\r\n          icon: this.iconoMarcador\r\n        })\r\n          .bindPopup('Aquí').openPopup();\r\n        this.mapa.addLayer(this.marcador);\r\n        this.distancia = this.Marcador[0].distancia;\r\n        this.idMarcador = this.Marcador[0].id;\r\n        this.isMarcadorGuardadoBD = true;\r\n        this.permitirColocarMarcador = false;\r\n      }\r\n    })\r\n  }\r\n\r\n  crearMarcador() {\r\n    let Marcador = {};\r\n    Marcador['latitud'] = this.latitud;\r\n    Marcador['longitud'] = this.longitud;\r\n    Marcador['distancia'] = this.distancia;\r\n    this.crudService.crearNuevaMarcador(Marcador).then(res => {\r\n      this.latitud = undefined;\r\n      this.longitud = undefined;\r\n      console.log(res);\r\n    }).catch(error => {\r\n      console.log(error);\r\n    })\r\n    this.router.navigate(['/visualizar']);\r\n    console.log('Marcador creado');\r\n  }\r\n\r\n  eliminarMarcador() {\r\n    this.mapa.removeLayer(this.marcador);\r\n    this.permitirColocarMarcador = true;\r\n    this.crudService.eliminarMarcador(this.idMarcador);\r\n    this.isMarcadorColocadoMapa = false;\r\n    this.isMarcadorGuardadoBD = false;\r\n    this.distancia = undefined;\r\n    console.log('Marcador eliminado');\r\n  }\r\n\r\n  agregarQuitarMarcadorClick() {\r\n    this.mapa.on('dblclick', e => {\r\n      let latitudLongitud = this.mapa.mouseEventToLatLng(e.originalEvent);\r\n\r\n      if (this.isMarcadorColocadoMapa) {\r\n        this.mapa.removeLayer(this.marcador);\r\n        this.isMarcadorColocadoMapa = false;\r\n\r\n      } else if (!this.isMarcadorColocadoMapa && this.permitirColocarMarcador) {\r\n        this.latitud = latitudLongitud.lat;\r\n        this.longitud = latitudLongitud.lng;\r\n        this.marcador = L.marker([latitudLongitud.lat, latitudLongitud.lng], {\r\n          icon: this.iconoMarcador\r\n        })\r\n          .addTo(this.mapa);\r\n        this.isMarcadorColocadoMapa = true;\r\n      }\r\n    })\r\n  }\r\n\r\n  iconoMarcador = L.icon({\r\n    iconSize: [60, 60],\r\n    iconAnchor: [30, 60],\r\n    iconUrl: 'assets/marcador.png'\r\n  });\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div class=\"row\">\r\n    <div id=\"mapa\" style=\"width: 100%; height: 375px;\"></div>\r\n\r\n\r\n    <div class=\"col-12\">\r\n      <br><br>\r\n      <span>\r\n        <h2>Inserción Marcador</h2>\r\n      </span>\r\n      <div id=\"ingresoDatos\" *ngIf=\"!isMarcadorGuardadoBD; else MostrarEliminar\" class=\"container\">\r\n        <br>\r\n        <h6> Presione dos veces en el mapa para insertar un marcador e ingrese\r\n          la distancia máxima (en métros) del radio que permitirá alejarse el ganado.\r\n        </h6>\r\n        <div class=\"form-group\">\r\n          <input class=\"form-control\" type=\"number\" [(ngModel)]=\"distancia\" placeholder=\"Distancia máxima permitida\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <button class=\"btn btn-primary\" [disabled]=\"!distancia || !isMarcadorColocadoMapa\"\r\n            (click)=\"crearMarcador()\">Aceptar</button>\r\n        </div>\r\n      </div>\r\n\r\n      <ng-template #MostrarEliminar>\r\n        <div class=\"container\">\r\n          <br>\r\n          <h6>Presione el botón para eliminar el marcador actual e insertar uno nuevo</h6>\r\n          <div class=\"form-group\">\r\n            <button class=\"btn btn-danger\" (click)=\"eliminarMarcador()\">Eliminar</button>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <span><b>Distancia</b> </span>\r\n            <input class=\"form-control border border-primary\" type=\"number\" [(ngModel)]=\"distancia\"\r\n              placeholder=\"Distancia máxima permitida\">\r\n          </div>\r\n          <br>\r\n        </div>\r\n      </ng-template>\r\n    </div>\r\n  </div>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport * as L from 'leaflet';\r\n\r\n@Component({\r\n  selector: 'app-mapa',\r\n  templateUrl: './mapa.component.html',\r\n  styleUrls: ['./mapa.component.css']\r\n})\r\nexport class MapaComponent implements OnInit {\r\n\r\n  public mapa;\r\n  marcador: { latitud: number, longitud: number };\r\n  urlAPIMapa = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';\r\n\r\n  constructor(private rutaActiva: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.inicializarMapa();\r\n    this.marcador = {\r\n      latitud: this.rutaActiva.snapshot.params.latitud,\r\n      longitud: this.rutaActiva.snapshot.params.longitud\r\n    }\r\n\r\n    this.rutaActiva.params.subscribe(\r\n      (params: Params) => {\r\n        var mark = L.marker([params.latitud, params.longitud], {\r\n          icon: this.iconoMarcador\r\n        }).addTo(this.mapa);\r\n      }\r\n    )\r\n  }\r\n\r\n  private inicializarMapa(): void {\r\n    this.mapa = L.map('mapa').setView([16.752769803087457, -93.11428070068361], 13);\r\n    L.tileLayer(this.urlAPIMapa, {\r\n      maxZoom: 20,\r\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n    }).addTo(this.mapa);\r\n  }\r\n\r\n  iconoMarcador = L.icon({\r\n    iconSize: [60, 60],\r\n    iconAnchor: [30, 60],\r\n    iconUrl: 'assets/marcador.png'\r\n  });\r\n}\r\n","<div class=\"map-container\">\r\n    <div class=\"map-frame\">\r\n        <div id=\"mapa\" ></div>\r\n    </div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { VirtualTimeScheduler } from 'rxjs';\r\n\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CrudService {\r\n\r\n  constructor(public fireservice: AngularFirestore) { }\r\n\r\n  crearNuevaMarcador(Marcador) {\r\n    return this.fireservice.collection('MarcadorDistancia').add(Marcador);\r\n  }\r\n\r\n  get_Marcador() {\r\n    return this.fireservice.collection('MarcadorDistancia').snapshotChanges();\r\n  }\r\n\r\n  eliminarMarcador(idMarcador) {\r\n    this.fireservice.doc('MarcadorDistancia/' + idMarcador).delete();\r\n  }\r\n\r\n  crearUbicacionFueraLimite(ubicacion) {\r\n    return this.fireservice.collection('ubicacion').add(ubicacion);\r\n  }\r\n\r\n\r\n  get_Ubicaciones() {\r\n    return this.fireservice.collection('ubicacion').snapshotChanges();\r\n  }\r\n}\r\n","import { Component, OnInit, AfterViewInit } from '@angular/core';\r\nimport { CrudService } from '../service/crud.service'\r\nimport * as L from 'leaflet';\r\nimport { PubNubAngular } from 'pubnub-angular2';\r\n\r\n@Component({\r\n  selector: 'app-visualizar-ubicacion-mapa',\r\n  templateUrl: './visualizar-ubicacion-mapa.component.html',\r\n  styleUrls: ['./visualizar-ubicacion-mapa.component.css'],\r\n  providers: [PubNubAngular]\r\n})\r\n\r\nexport class VisualizarUbicacionMapaComponent implements OnInit {\r\n  public mapa;\r\n  rango;\r\n  latitudFuera;\r\n  longitudFuera;\r\n  marcador = null;\r\n  MarcadorCentral: any;\r\n  pubnub: PubNubAngular;\r\n  pnChannel = \"raspi-tracker\";\r\n  fecha: number = Date.now();\r\n  fueraRango: boolean = false;\r\n  marcadorExistente: boolean = false;\r\n  urlAPIMapa = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';\r\n\r\n  constructor(pubnub: PubNubAngular, public crudService: CrudService) {\r\n    this.pubnub = pubnub;\r\n    this.pubnub.init({\r\n      publishKey: 'pub-c-6e70a79c-7af6-4177-bfb5-b7eaf484a510',\r\n      subscribeKey: 'sub-c-b1ea6414-c791-11ea-b3f2-c27cb65b13f4'\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.inicializarMapa();\r\n    this.cambiarPosicionMarcador();\r\n    this.pubnub.subscribe({ channels: [this.pnChannel] });\r\n    this.obtenerMarcador();\r\n  }\r\n\r\n  private inicializarMapa(): void {\r\n    this.mapa = L.map('mapa').setView([16.752769803087457, -93.11428070068361], 13);\r\n    L.tileLayer(this.urlAPIMapa, {\r\n      maxZoom: 18,\r\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n    }).addTo(this.mapa);\r\n  }\r\n\r\n  obtenerMarcador() {\r\n    this.crudService.get_Marcador().subscribe(data => {\r\n      this.MarcadorCentral = data.map(e => {\r\n        return {\r\n          id: e.payload.doc.id,\r\n          latitud: e.payload.doc.data()['latitud'],\r\n          longitud: e.payload.doc.data()['longitud'],\r\n          distancia: e.payload.doc.data()['distancia'],\r\n        };\r\n      })\r\n      if (this.MarcadorCentral.length == 1) {\r\n        this.marcadorExistente = true\r\n        var circle = L.circle([this.MarcadorCentral[0].latitud, this.MarcadorCentral[0].longitud], this.MarcadorCentral[0].distancia / 40, {\r\n          color: 'orange'\r\n        }).addTo(this.mapa);\r\n        this.rango = L.circle([this.MarcadorCentral[0].latitud, this.MarcadorCentral[0].longitud], this.MarcadorCentral[0].distancia).addTo(this.mapa);\r\n      }\r\n    })\r\n  }\r\n\r\n  crearUbicacionGanadoAlejado() {\r\n    let Ubicacion = {};\r\n    Ubicacion['latitud'] = this.latitudFuera;\r\n    Ubicacion['longitud'] = this.longitudFuera;\r\n    Ubicacion['fecha'] = this.fecha;\r\n    this.crudService.crearUbicacionFueraLimite(Ubicacion).then(res => {\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  medirDistancia(lat, lng, latCircle, lngCircle) {\r\n    var distance = this.mapa.distance([lat, lng], [latCircle, lngCircle]);\r\n    return distance;\r\n  }\r\n\r\n  cambiarPosicionMarcador = function () {\r\n    this.pubnub.addListener({\r\n      message: (payload) => {\r\n        if (payload.message.lat) {\r\n          var lat = payload.message.lat;\r\n          var lng = payload.message.lng;\r\n          if (this.marcador) {\r\n            this.mapa.removeLayer(this.marcador);\r\n          }\r\n          console.log(payload);\r\n          this.marcador = L.marker([lat, lng], {\r\n            icon: this.iconoMarcador\r\n          }).bindPopup('Aquí').openPopup().addTo(this.mapa);\r\n          if (this.marcadorExistente) {\r\n            if (this.medirDistancia(lat, lng, this.rango.getLatLng().lat, this.rango.getLatLng().lng) <= this.rango.getRadius()) {\r\n              this.rango.setStyle({\r\n                color: 'green'\r\n              });\r\n              this.fueraRango = false;\r\n            } else {\r\n              this.latitudFuera = lat;\r\n              this.longitudFuera = lng;\r\n              this.rango.setStyle({\r\n                color: 'red'\r\n              });\r\n              if (!this.fueraRango) {\r\n                this.crearUbicacionGanadoAlejado();\r\n                this.fueraRango = true;\r\n              }\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  iconoMarcador = L.icon({\r\n    iconSize: [60, 60],\r\n    iconAnchor: [30, 60],\r\n    iconUrl: 'assets/vaca.png'\r\n  });\r\n}\r\n","<div class=\"map-container\">\r\n    <div class=\"map-frame\">\r\n        <div id=\"mapa\" ></div>\r\n    </div>\r\n</div>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  firebase: {\r\n    apiKey: \"AIzaSyAlDYtum9Txc2zqZaP9GEaF1UFrbHDNrUk\",\r\n    authDomain: \"rastreador-ef6fe.firebaseapp.com\",\r\n    databaseURL: \"https://rastreador-ef6fe.firebaseio.com\",\r\n    projectId: \"rastreador-ef6fe\",\r\n    storageBucket: \"rastreador-ef6fe.appspot.com\",\r\n    messagingSenderId: \"455383615386\",\r\n    appId: \"1:455383615386:web:71b09d614a8e72ba5d1c23\",\r\n    measurementId: \"G-BXHWWZM1VC\"\r\n  }\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}